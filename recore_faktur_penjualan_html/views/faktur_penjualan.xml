<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>
		<template id="recore_faktur_penjualan.faktur_penjualan_layout">
			<link href="/report/static/src/css/reset.min.css" rel="stylesheet"/>
			<link href="/web/static/lib/bootstrap/css/bootstrap.css" rel="stylesheet"/>
			<link href="/website/static/src/css/website.css" rel="stylesheet"/>
			<link href="/web/static/lib/fontawesome/css/font-awesome.css" rel="stylesheet"/>
				<t t-foreach="docs" t-as="o"> <!-- this makes the context model data accessible throughout the variable "o" -->
					<t t-if="o and 'company_id' in o">
						<t t-set="company" t-value="o.company_id"></t>
					</t>
					<t t-if="not o or not 'company_id' in o">
						<t t-set="company" t-value="res_company"></t>
					</t>

					<div class="row">
						<div class="col-xs-3" t-if="company">
							<span t-field="company.name"/>
						</div>
					</div>
					<hr style="margin-top:5px;"/>
					<div class="row">
						<div class="col-xs-2">
							<div t-if="company.street">
								<span t-field="company.street"/>
								<span t-field="company.city"/>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-xs-2">
							<div t-if="o.number">
						Invoice #
							</div>
							<div t-if="o.date_invoice">
						Tanggal
							</div>
						</div>
						<div class="col-xs-2">
							<div t-if="o.number">
								<span t-field="o.number"/>
							</div>
							<div t-if="o.date_invoice">
								<span t-field="o.date_invoice"/>
							</div>
						</div>
						<div class="col-xs-2 col-xs-offset-3">
							<div t-if="o.partner_id">
						Pembeli
							</div>
						</div>
						<div class="col-xs-2">
							<div t-if="o.partner_id">
								<span t-field="o.partner_id.name"/>
								<br/>
								<span t-field="o.partner_id.street"/>
								<br/>
								<span t-field="o.partner_id.city"/>
							</div>
						</div>
					</div>
					<hr/>

					<table class="table table-condensed">
						<thead>
							<tr>
								<th>Barang</th>
								<th>Jumlah</th>
								<th class="text-right">Harga Satuan</th>
								<th class="text-right" groups="sale.group_discount_per_so_line">Diskon (%)</th>
								<!-- <th class="text-right">PPN</th> -->
								<th class="text-right">Harga</th>
							</tr>
						</thead>
						<tbody class="invoice_tbody">
							<tr t-foreach="o.invoice_line" t-as="l">
								<td><span t-field="l.name"/></td>
								<td>
									<span t-field="l.quantity"/>
									<span t-field="l.uos_id"  groups="product.group_uom"/>
								</td>
								<td class="text-right">
									<span t-field="l.price_unit"/>
								</td>
								<td class="text-right" groups="sale.group_discount_per_so_line"><span t-field="l.discount"/></td>
								<!-- <td class="text-right">
							<span t-esc="', '.join(map(lambda x: x.name, l.invoice_line_tax_id))"/>
						</td> -->
								<td class="text-right">
									<span t-field="l.price_subtotal"
											t-field-options='{"widget": "monetary", "display_currency": "o.currency_id"}'/>
								</td>
							</tr>
						</tbody>
					</table>

					<div class="row">
						<div class="col-xs-4 pull-right">
							<table class="table table-condensed">
								<tr class="border-black" t-if="o.amount_tax">
									<td><strong>Total Sebelum Pajak</strong></td>
									<td class="text-right">
										<span t-field="o.amount_untaxed" t-field-options='{"widget": "monetary", "display_currency": "o.currency_id"}'/>
									</td>
								</tr>
								<tr t-if="o.amount_tax">
									<td>PPN</td>
									<td class="text-right">
										<span t-field="o.amount_tax" t-field-options='{"widget": "monetary", "display_currency": "o.currency_id"}'/>
									</td>
								</tr>
								<tr class="border-black">
									<td><strong>Total</strong></td>
									<td class="text-right">
										<span t-field="o.amount_total" t-field-options='{"widget": "monetary", "display_currency": "o.currency_id"}'/>
									</td>
								</tr>
							</table>
						</div>
					</div>

					<p t-if="o.comment">
						<strong>Komentar:</strong>
						<span t-field="o.comment"/>
					</p>
					<p t-if="o.payment_term.note">
						<strong>Termin Pembayaran:</strong>
						<span t-field="o.payment_term.note"/>
					</p>
					<p t-if="o.fiscal_position.note">
						<strong>Fiscal Position Remark:</strong>
						<span t-field="o.fiscal_position.note"/>
					</p>
					<p t-if="o.amount_total">
						<strong>Terbilang:</strong>
				        # <span t-esc="o.amount_to_text(o.amount_total, 'idr')"/> #
					</p>
				</t>
		</template>

		<template id="report_faktur_penjualan_document">
			<t t-call="recore_faktur_penjualan.faktur_penjualan_layout">
				<div class="page">
				</div>
			</t>
		</template>

		<template id="report_faktur_penjualan">
			<t t-call="report.html_container">
				<t t-foreach="doc_ids" t-as="doc_id">
					<t t-raw="translate_doc(doc_id, doc_model, 'partner_id.lang', 'recore_faktur_penjualan.report_faktur_penjualan_document')"/>
				</t>
			</t>
		</template>

	</data>
</openerp>